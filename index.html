<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="Schalk Cronjé">
<title>Consuming JVM Libraries</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<link rel="stylesheet" href="https://guides.gradle.org/asciidoctor.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Source+Code+Pro:500">
<link rel="apple-touch-icon" sizes="180x180" href="https://guides.gradle.org/icon/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://guides.gradle.org/icon/manifest.json">
<link rel="mask-icon" href="https://guides.gradle.org/icon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://guides.gradle.org/icon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Consuming JVM Libraries">
<meta name="application-name" content="Consuming JVM Libraries">
<meta name="msapplication-config" content="https://guides.gradle.org/icon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<script defer src="https://guides.gradle.org/js/set-time-to-complete-text.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,"script","https://www.google-analytics.com/analytics.js","ga");
  ga("create", "UA-4207603-1", "auto");
  ga("send", "pageview");
</script>
</head>
<body class="article toc2 toc-right">
<div id="header"><div style="padding-top: 10px;"><a href="https://guides.gradle.org"><img src="https://guides.gradle.org/gradle-guides.svg" alt=""></a></div><h1>Consuming JVM Libraries</h1>
<div class="details">
<span id="author" class="author">Schalk Cronjé</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#what_you_ll_build">What you&#8217;ll build</a></li>
<li><a href="#what_you_ll_need">What you&#8217;ll need</a></li>
<li><a href="#create_project">Create project</a></li>
<li><a href="#create_the_application">Create the application</a></li>
<li><a href="#licensing">Licensing</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#next_steps">Next Steps</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide demonstrates how to create a Java application which consumes an external library.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_build"><a class="anchor" href="#what_you_ll_build"></a>What you&#8217;ll build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll generate a Java application with the standard layout. You will then add a third-party library to your application, build it and package it. The final product will be a greeter application that produces an ASCII-art type greeting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_need"><a class="anchor" href="#what_you_ll_need"></a>What you&#8217;ll need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>About <span class="time-to-complete-text">NN</span></p>
</li>
<li>
<p>A text editor</p>
</li>
<li>
<p>A command prompt</p>
</li>
<li>
<p>The Java Development Kit (JDK), version 1.7 or higher</p>
</li>
<li>
<p>A <a href="https://gradle.org/install">Gradle distribution</a>, version 4.0 or better</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_project"><a class="anchor" href="#create_project"></a>Create project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first step is to create a folder for the new project and add a <a href="https://docs.gradle.org/4.0/userguide/gradle_wrapper.html#sec:wrapper_generation">Gradle Wrapper</a> to the project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mkdir consuming-jvm-libraries
$ cd consuming-jvm-libraries
$ gradle wrapper <i class="conum" data-value="1"></i><b>(1)</b>

:wrapper

BUILD SUCCESSFUL</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This allows a version of Gradle to be locked to a project and henceforth you can use <code>./gradlew</code> instead of <code>gradle</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Instead of using the built-in wrapper task, you may wish to use the <code>init</code> task from the <a href="https://docs.gradle.org/4.0/userguide/build_init_plugin.html">Build Init</a> instead. This will create the initial project structure for you. See the <a href="https://guides.gradle.org/building-java-applications">Building Java Applications guide</a> for a detailed explanation of how to do this.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a <code>settings.gradle</code> file and set the name of the project. Doing this will ensure that the project builds with the correct name regardless of the name of the project root folder.</p>
</div>
<div class="listingblock">
<div class="title">settings.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">rootProject.name=<span class="string"><span class="delimiter">'</span><span class="content">greeterApp</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now create a <code>build.gradle</code> file and apply the Java plugin.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply plugin : <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is enough to build a self-contained Java project, but you will be creating a greeter application, which will print the greeting in Ascii-art. For that an external library is required. Continue editing <code>build.gradle</code> and add a <code>repositories</code> block.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">repositories {
    jcenter() <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use JCenter as the repository.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to find artifacts you have to tell Gradle where to look. Gradle supports two repository types - <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sub:maven_central">Maven</a> &amp; <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sec:ivy_repositories">Ivy</a>. In addition Gradle supports simplified configuration for the most popular centralized repositories - JCenter, Maven Central and Google&#8217;s Android repository. In this guide you are using JCenter as it has access to all of the repositories hosted on Maven Central as well as many more that are published to Bintray,</p>
</div>
<div class="paragraph">
<p>The next step is to tell Gradle which external artifacts you need for your projects. As you are doing and Ascii-art application you will be using <a href="https://github.com/lalyos/jfiglet">JFiglet</a>. Add a <code>dependencies</code> block to <code>build.gradle</code>.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    implementation <span class="string"><span class="delimiter">'</span><span class="content">com.github.lalyos:jfiglet:0.0.8</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add the JFiglet dependency to the <code>implementation</code> configuration.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Gradle supports a variety of <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sub:module_dependencies">notations</a>, of which the one used above is probably the most popular. This uses what is most commonly known as Maven coordinates.</p>
</div>
<div class="paragraph">
<p>Adding a dependency has two parts: one is the dependency itself and the other is the configuration to which it is added. The latter term is used in Gradle to effectively group dependencies together by context. In this the configuration is called <code>implementation</code> and it is provided by the Java Plugin.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can learn more about using configurations for your own custom purposes by studying the <a href="https://docs.gradle.org/4.0/dsl/org.gradle.api.artifacts.ConfigurationContainer.html">ConfigurationContainer</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The purpose of the <code>implementation</code> configuration is the grouping of dependencies that are used by a library or application, but not exported via any of its APIs. As this is a stand-alone application, all dependencies can be placed in this configuration for purposes of application construction.</p>
</div>
<div class="paragraph">
<p>You can also inspect all of the dependencies you have added on a per-configuration basis, by using the <code>dependencies</code> task that is built into Gradle.</p>
</div>
<div class="listingblock terminal">
<div class="content">
<pre>./gradlew dependencies --configuration implementation <i class="conum" data-value="1"></i><b>(1)</b>

:dependencies

------------------------------------------------------------
Root project
------------------------------------------------------------

implementation - Implementation only dependencies for source set 'main'. (n)
\--- com.github.lalyos:jfiglet:0.0.8 (n)

(n) - Not resolved (configuration is not meant to be resolved)

BUILD SUCCESSFUL in 17s
1 actionable task: 1 executed</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>--configuration</code> parameter restricts inspection to a single configuration.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are using Gradle 4.0 or later you may see less output from the console that you might see in this guide. This is because in this guide output is shown as when <code>--console-plain</code> is also passed to Gradle as a command-line. This is done to show the tasks that Gradle is executing.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create_the_application"><a class="anchor" href="#create_the_application"></a>Create the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proceed to creating a <code>src/main/java</code> folder and place a <code>GreeterApp.java</code> file within that folder containing the following source code</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/GreeterApp.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">com.github.lalyos.jfiglet.FigletFont</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">GreeterApp</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> <span class="exception">IOException</span> {
        <span class="predefined-type">String</span> asciiArt = FigletFont.convertOneLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, </span><span class="delimiter">&quot;</span></span> + args[<span class="integer">0</span>]);
        <span class="predefined-type">System</span>.out.println(asciiArt);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Due to simplicity of this two line application, testing will be left from from this example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Build your application by using the <code>jar</code> task.</p>
</div>
<div class="listingblock terminal">
<div class="content">
<pre>$ ./gradlew jar

:compileJava
:processResources NO-SOURCE
:classes
:jar

BUILD SUCCESSFUL in 6s
2 actionable tasks: 2 executed</pre>
</div>
</div>
<div class="paragraph">
<p>As this is an application, it will be useful to distribute it. Edit <code>build.gradle</code> again and add the Application plugin.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply plugin : <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
mainClassName = <span class="string"><span class="delimiter">'</span><span class="content">GreeterApp</span><span class="delimiter">'</span></span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <a href="https://docs.gradle.org/4.0/userguide/application_plugin.html">Application plugin</a> is a very useful plugin that allows you to bundle your aplpication along with all of its dependencies.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This configures the entry point into the application, which needs to be a class with a class (static) method called <code>main</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finish building your application by using the <code>build</code> task.</p>
</div>
<div class="listingblock terminal">
<div class="content">
<pre>$ ./gradlew build

:compileJava UP-TO-DATE
:processResources NO-SOURCE
:classes UP-TO-DATE
:jar UP-TO-DATE
:startScripts
:distTar
:distZip
:assemble
:compileTestJava NO-SOURCE
:processTestResources NO-SOURCE
:testClasses UP-TO-DATE
:test NO-SOURCE
:check UP-TO-DATE
:build

BUILD SUCCESSFUL in 1s
5 actionable tasks: 3 executed, 2 up-to-date</pre>
</div>
</div>
<div class="paragraph">
<p>If you inspect the <code>build/distributions</code> folder you will notice both <code>.zip</code> and <code>.tar</code> archives. This is the application ready for distribution. Now it is time to test your application manually. The Application plugin provides a useful <code>instalLDist</code> task to install your application into the <code>build/install</code> folder for validation purposes.</p>
</div>
<div class="listingblock terminal">
<div class="content">
<pre>$ ./gradlew installDist

:compileJava UP-TO-DATE
:processResources NO-SOURCE
:classes UP-TO-DATE
:jar UP-TO-DATE
:startScripts UP-TO-DATE
:installDist

BUILD SUCCESSFUL in 1s
4 actionable tasks: 1 executed, 3 up-to-date</pre>
</div>
</div>
<div class="paragraph">
<p>Look in <code>build/install</code> where you should find a <code>greeterApp</code> folder containing <code>lib</code> and <code>bin</code> folders. If you look inthe <code>lib</code> folder you will see both your application and the JFiglet JARs.</p>
</div>
<div class="paragraph">
<p>Run the application by changing to the <code>build/install/greeterApp</code> folder and executing the application.</p>
</div>
<div class="listingblock terminal">
<div class="content">
<pre>$ cd build/install/greeterApp
$ ./bin/greeterApp Gradle

  _   _          _   _                  ____                      _   _
 | | | |   ___  | | | |   ___          / ___|  _ __    __ _    __| | | |   ___
 | |_| |  / _ \ | | | |  / _ \        | |  _  | '__|  / _` |  / _` | | |  / _ \
 |  _  | |  __/ | | | | | (_) |  _    | |_| | | |    | (_| | | (_| | | | |  __/
 |_| |_|  \___| |_| |_|  \___/  ( )    \____| |_|     \__,_|  \__,_| |_|  \___|
                                |/</pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! You have just created an application which consumes a third-party library from an external repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="licensing"><a class="anchor" href="#licensing"></a>Licensing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Third-party JVM libraries are released under various licenses. It is important to always check the licenses of the libraries you use, including all of the libraries that are introduced via transitive dependencies, for compatibility.</p>
</div>
<div class="paragraph">
<p>For example the library that you used today is released under <a href="http://www.gnu.org/licenses/gpl-2.0.html">GPL 2.0</a>. This will mean that should you want to release the application you have just built, it will also need to be under GPL 2.0.</p>
</div>
<div class="paragraph">
<p>You can utilise Jeroen van Erp&#8217;s excellent <a href="https://plugins.gradle.org/plugin/com.github.hierynomus.license">License plugin</a> to create a report on the licenses of all of the dependencies of your project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You now have JVM application that consumes an external library. In this process you saw:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How to configure repositories and dependencies.</p>
</li>
<li>
<p>Build an aplication consuming external dependencies.</p>
</li>
<li>
<p>Distribute an application with all external dependencies.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next_steps"><a class="anchor" href="#next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Read about using your own <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sub:maven_repo">Maven repository</a> installations</p>
</li>
<li>
<p>Read about configuring <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sec:ivy_repositories">Ivy repositories</a>.</p>
</li>
<li>
<p>Read about finding artifacts without metadata in <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sec:flat_dir_resolver">local folders</a>.</p>
</li>
<li>
<p>Read about <a href="https://docs.gradle.org/4.0/userguide/dependency_management.html#sec:finetuning_the_dependency_resolution_process">advanced artifact resolution</a> and how to deal with version &amp; dependency conflicts.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-07-03 11:15:40 UTC
</div>
</div>
</body>
</html>